** general notes
leidenbase git r:
  o  use the leidenbase repository branch called dev
     for development

** building (after setup)
  o  run 'make' in the dev repository to generate an
     R package for distribution
  o  copy the R package contents into the leidenbase
     repository master branch where it is used by
     the devtools::install_github() command
  o  add excluded files to .Rbuildignore

** cautions
  o  watch for igraph graph directed/undirected
  o  Windows testing build using the git bash shell failed because the link line is too long. Use the MS Power Shell.

** setup
clone leidenbase from git repository
source: https://github.com/cole-trapnell-lab/leidenbase
notes:
  o  cigraph versions > 0.8* use cmake and various subdirectories
     in igraph/src so I am using cigraph versions 0.8.*.
  o  cigraph 0.8.* versions are no longer accessible as branches; e.g.,
     the URL for 0.8.5 is https://github.com/igraph/igraph/tree/0.8.5.
     I don't understand 'tree's in github and I cannot clone a tree
     or checkout a tree branch but apparently one can check them out
     using their SHA strings.
  o  I found the 0.8.5 tree SHA string as follows
       o  go to igraph releases on the right side of the repository page
       o  find the desired release and the SHA string is in the left
          column, beneath the release version string 'tag', which are
          to the left of the release title
  o  I got the version string using <igraph>/tools/getversion.sh
  o  leidenbase uses git submodule to 'import' the
     C igraph source code.
  o  git clone commands
       git clone <git_repository>
       cd leidenbase
       git checkout dev
       git submodule add https://github.com/igraph/igraph cigraph
       git submodule init
       git submodule update
       git submodule foreach git pull origin master # this updates the modules
       # for checking out tree (not master)
       cd cigraph
       git checkout <SHA string>
       Note: the Makefile script expects the git submodule in leidenbase/cigraph
  o  git submodule information URL: https://gist.github.com/gitaarik/8735255
  o  igraph and leidenbase version numbers are set in/by leidenbase/Makefile 
  o  object_files and Makevars.* (where Makevars.* has OBJECTS defined as
     the object files in object_files) are made/updated by leidenbase/Makefile
  o  run Make in leidenbase dev
  o  run R: devtools::document() before packaging
  o  check before packaging
       o  run devtools::check()
       o  run devtools::test()
       o  check compilation
            o  Windows
            o  MacOS
            o  Linux
  o  re-run Make to create leidenbase tar.gz file
  o  move leidenbase_x.x.x.tar.gz file into parent directory
  o  remove leidenbase master: in leidenbase repository:
       o  git checkout master
       o  rm DESCRIPTION README.md configure configure.ac install-sh
       o  rm -r R doc tests man src inst
  o  in parent directory untar leidenbase_x.x.x.tar.gz into leidenbase
       tar xzvf leidenbase_x.x.x.tar.gz
  o  add and commit leidenbase master and push to github


destination directory: $top_dir/src/arpack
source: R igraph distribution $top_dir/tools/arpack

destination file: $top_dir/Makefile
source: R igraph $top_dir/Makefile
notes:
  o  the leidenbase Makefile is a modified version of the
     R igraph Makefile

destination file: $top_dir/templates/igraph.h.tpl
source: C igraph package $top_dir/include/igraph.h
notes:
  o  remove: #include "igraph_revolver.h"

destination file: $top_dir/templates/configure.ac.igraph.tpl
source: R igraph package $top_dir/configure.ac
notes:
  o  modify the line
       AC_CONFIG_SRCDIR(src/rinterface.c)
     to
       AC_CONFIG_SRCDIR(src/igraph_set.c)
  o  comment out or remove the lines
       AC_CONFIG_FILES([src/Makevars.tmp:src/Makevars.in], [
           if test -f src/Makevars && cmp -s src/Makevars.tmp src/Makevars; then
             AC_MSG_NOTICE([creating src/Makevars])
             AC_MSG_NOTICE([src/Makevars is unchanged])
             rm src/Makevars.tmp
           else
             AC_MSG_NOTICE([creating src/Makevars])
             mv src/Makevars.tmp src/Makevars
           fi
         ]
       )

destination file: $top_dir/templates/configure.win
source: R igraph package $top_dir/configure.win
notes:
  o  configure.win is empty in the R igraph package

destination file: $top_dir/templates/install-sh.tpl
source: .
notes:
  o  configure looks (apparently) for the existence of
     $top_dir/install-sh when configure.ac has the macro
       AC_CONFIG_SUBDIRS
     This install-sh script is empty.

destination file: $top_dir/NAMESPACE
source: generated by devtools::document()


== Changes

** prepare leidenbase releasde 0.1.3

leidenalg version: 0.8.4.dev4+g0947e63
igraph version: 0.8.5


** prepare leidenbase release 0.1.2

  o  edit templates/Makevars.in.tpl to add -DUSING_R

  o  edit src/igraph_rinterface.cpp and src/leidenFindPartitionR2C.cpp to use appropriate error handler

  o  run git submodule commands

  o  edit leidenbase/Makefile to set VERSION_LEIDENBASE=0.1.2 and VERSION_IGRAPH=0.8.2

  o  update README.md

  o  update version numbers in DESCRIPTION

  o  remove Imports igraph from DESCRIPTION

